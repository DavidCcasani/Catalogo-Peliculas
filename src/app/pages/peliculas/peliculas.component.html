<!-- ğŸ” Buscador centrado con icono -->
<div class="buscador-centrado">
  <div class="buscador-wrapper">
    <input
      type="text"
      placeholder="Buscar por tÃ­tulo, gÃ©nero, director o aÃ±o..."
      [(ngModel)]="busqueda"
      class="buscador"
    />
    <span class="material-icons icono-lupa">search</span>
  </div>
</div>

<!-- ğŸ›ï¸ Filtros -->
<div class="filtros-container">
  <label>
    Filtrar por gÃ©nero:
    <select [(ngModel)]="generoSeleccionado" name="genero">
      <option *ngFor="let genero of generos" [value]="genero">{{ genero }}</option>
    </select>
  </label>

  <label>
    Ordenar por:
    <select [(ngModel)]="criterioOrden">
      <option value="titulo">TÃ­tulo (A-Z)</option>
      <option value="anio">AÃ±o (mÃ¡s reciente)</option>
    </select>
  </label>
</div>

<!-- ğŸ“Œ Encabezado y botÃ³n de agregar (solo admins) -->
<div class="header">
  <h2>PelÃ­culas</h2>
  <a
    *ngIf="rolUsuario === 'admin'"
    routerLink="/agregar"
    class="btn-agregar"
  >
    Agregar nueva
  </a>
</div>

<!-- â³ Cargando -->
<div *ngIf="loading" class="estado-mensaje">
  <p>ğŸ¬ Cargando pelÃ­culas...</p>
</div>

<!-- âŒ Error -->
<div *ngIf="errorCarga && !loading" class="estado-mensaje error">
  <p>âŒ Error al cargar las pelÃ­culas. Intenta nuevamente mÃ¡s tarde.</p>
</div>

<!-- ğŸï¸ Lista de PelÃ­culas -->
<ul
  class="lista"
  *ngIf="!loading && !errorCarga && peliculasFiltradas.length > 0; else sinResultados"
>
  <li *ngFor="let pelicula of peliculasFiltradas" class="tarjeta">
    <a [routerLink]="['/pelicula', pelicula.id]" *ngIf="pelicula.imagen">
      <img [src]="pelicula.imagen" alt="{{ pelicula.titulo }}" class="portada" />
    </a>



    <!-- ğŸ”§ Acciones solo si es admin -->
    <div class="acciones" *ngIf="rolUsuario === 'admin'">
      <button (click)="editar(pelicula.id)">Editar</button>
      <button (click)="eliminar(pelicula.id!)">Eliminar</button>
    </div>
  </li>
</ul>

<!-- ğŸ“­ Sin resultados -->
<ng-template #sinResultados>
  <p *ngIf="!loading && !errorCarga" class="estado-mensaje">
    ğŸ“­ No hay pelÃ­culas disponibles.
  </p>
</ng-template>

